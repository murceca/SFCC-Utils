<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>objectUtils.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#difference">difference</a></li><li><a href="global.html#flatten">flatten</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#isEqual">isEqual</a></li><li><a href="global.html#parseJSON">parseJSON</a></li><li><a href="global.html#pick">pick</a></li><li><a href="global.html#unique">unique</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">objectUtils.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const Logger = require('dw/system/Logger');

/**
 * Parses stringified JSON value. Never throws any exceptions,
 * but outputs JSON parsing errors into logs.
 * 
 * @param {string} jsonString - JSON string.
 * @returns {object|null} - Parsed JSON value or `null`.
 * 
 * @example
 * parseJSON('{"countryCode":"CZ"}');
 * // {"countryCode":"CZ"}
 */
const parseJSON = (jsonString) => {
  let jsonObject = null;
  try {
    jsonObject = JSON.parse(jsonString);
  }
  catch (jsonParsingError) {
    Logger.error(jsonParsingError);
  }
  return jsonObject;
};

/**
 * Retrieves a property from an object based on the provided path.
 * Never throws any exceptions, but outputs retrieving property errors into logs.
 * 
 * @param {object} obj - The object from which to retrieve the property.
 * @param {string} path - The path to the desired property.
 * Use dot notation for object properties and square brackets
 * with indices for array elements (e.g., 'property[0].nested.property').
 * @returns {*} The value of the specified property if found;
 * otherwise, returns undefined.
 * 
 * @example
 * get(customer1, 'addressBook.preferredAddress.city');
 * get(product1, 'pageMetaTags[0].ID');
 */
const get = (obj, path) => {
  try {
    const properties = path.split('.');
    return properties.reduce((acc, current) => {
      const match = current.match(/(\w+)(\[(\d+)\])?/);
      if (match) {
        const key = match[1];
        const index = match[3];
        if (index !== undefined) {
          return acc &amp;&amp; acc[key] ? acc[key][index] : undefined;
        } else {
          return acc &amp;&amp; acc[key] ? acc[key] : undefined;
        }
      } else {
        return undefined;
      }
    }, obj);
  } catch (error) {
    Logger.error(error);
  }
}

/**
 * Creates a new object by picking specific properties from a source object
 * based on either a list of property names or a filtering function.
 * 
 * @param {object} primaryObject - The source object from which 
 * properties will be picked.
 * @param {...(string|function)} args - Either an array of property 
 * names to pick, or a filtering function to determine inclusion.
 * @returns {object} - A new object containing only the selected properties
 * from the source object.
 * 
 * @example
 * Picking specific properties by name
 * pick({ id: 1, name: 'productName', size: 500 }, 'id', 'name');
 * { id: 1, name: 'productName'}
 * 
 * Picking properties based on a filtering function
 * pick({ id: 1, name: 'productName', size: 500 }, (key, value) => value >= 500);
 * { size: 500 }
 */
const pick = function() {
  const newObject = {};
  const primaryObject = arguments[0];
  const args = Array.prototype.slice.call(arguments);
  const argsToPick = args.slice(1);
  if (typeof(args[1]) !== 'function') {
      argsToPick.forEach(key => {
      newObject[key] = primaryObject[key];
    });
  } else {
    const filterFn = args[1];
    Object.keys(primaryObject).forEach(key => {
      const val = primaryObject[key];
      const toInclude = filterFn(key, val);
      if (toInclude) {
        newObject[key] = primaryObject[key];
      }
    });
  }
  
  return newObject;
}

/**
 * Recursively checks if two objects are equal.
 *
 * @param {object} obj1 - The first object to compare.
 * @param {object} obj2 - The second object to compare.
 * @returns {boolean} Returns `true` if the objects are  equal, `false` otherwise.
 * 
 * @example
 * isEqual({id: 1, name: 'productName'}, {id: 1, name: 'productName'});
 * true
 * isEqual({id: 1, category: { name: 'Other'}}, {id: 1, category: { name: 'Other'}});
 * true
 * isEqual({id: 1}, {id: 1, category: { name: 'Other'}});
 * false
 */
const isEqual = (obj1, obj2) => {
  
  if (obj1 === obj2) {
    return true;
  }

  if (typeof obj1 !== 'object' || obj1 === null || typeof obj2 !== 'object' || obj2 === null) {
    return false;
  }

  const obj1Keys = Object.keys(obj1);
  const obj2Keys = Object.keys(obj2);

  if (obj1Keys.length !== obj2Keys.length) {
    return false;
  }

  for (const key of obj1Keys) {
    if (!obj2.hasOwnProperty(key) || !isEqual(obj1[key], obj2[key])) {
      return false;
    }
  }

  return true;
}

module.exports = {
  parseJSON,
  get,
  pick,
  isEqual
};</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Wed Dec 20 2023 23:32:44 GMT+0100 (Central European Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
